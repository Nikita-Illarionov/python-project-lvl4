{% extends 'task_manager/layout.html' %}

{% block title %}Users{% endblock %}

{% block content %}
    <div class="container" style="color: white">
      <h1 class="my-4 text-center">Задачи</h1>
      <a href="{% url 'create_task' %}"><button class="btn btn-info">Создать задачу</button></a>
      <div class="card my-3 bg-dark">
        <div class="card-body">
          <form class="form-inline center" method="get">
             <div class="form-group"><label for="id_status">Статус</label><div class="ml-2 mr-3"><select name="status" class="form-control" title="" id="id_status">
                {% for st in filter.form.status %}
                  {{ st }}
                {% endfor %}
              </select></div></div>
      <div class="form-group"><label for="id_label">Метка</label><div class="mr-3 ml-2"><select name="label" class="form-control" title="" id="id_label"><option value="" selected>---------</option>
              {% for l in filter.form.labels %}
                {{ l }}
              {% endfor %}
      </select></div></div>



      <div class="form-group"><label for="id_executor">Исполнитель</label><div class="mr-3 ml-2"><select name="executor" class="form-control" title="" id="id_executor">
                {% for assignee in filter.form.assigned_to %}
                  {{ assignee }}
                {% endfor %}
         </select></div></div>
      <div class="form-group"><div class="mr-3"><div class="form-check"><input type="checkbox" name="self_tasks" class="form-check-input" id="id_self_tasks"><label class="form-check-label" for="id_self_tasks">Только свои задачи</label></div></div></div>
      <div class="form-group">
        <input class="btn btn-primary" type="submit" value="Показать">
      </div>




</div></div>
  <div>
	<table class="table mx-auto my-1 table-bordered table-hover table-dark">
	    <thead>
		<tr>
		    <th>ID</th>
		    <th>Имя</th>
                    <th>Автор</th>
		    <th>Статус</th>
                    <th>Дата создания</th>
		    <th>Исполнитель</th>
		    <th></th>
		</tr>
	    </thead>
	    
	    <tbody>
		{% for task in filter.qs %}
		<tr>
		    <td>{{ task.id }}</td>
		    <td>{{ task.name }}</td>
                    <td>{{ task.creator }}</td>
		    <td>{{ task.status }}</td>
                    <td>{{ task.created_at }}</td>
		    <td>{{ task.assigned_to }}</td>
		    <td>
		        <a href="{% url 'update_task' task.id %}"><button class="btn btn-info btn-sm">Изменить</button></a>
		        <a href="{% url 'delete_task' task.id %}"><button class="btn btn-danger btn-sm">Удалить</button></a><br>
		    </td>
		</tr>
		{% endfor %}
	    </tbody>
	</table>
      </div>
	  </ul> 
{% endblock %}







